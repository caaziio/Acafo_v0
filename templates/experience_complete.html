{% extends "layout.html" %}
{% block title %}Experience Complete{% endblock %}
{% block content %}

<div class="bg-white p-6 rounded-xl shadow-md">
  <h2 class="text-2xl font-semibold mb-4">âœ… Experience Saved</h2>

  <div class="mb-6">
    <h3 class="text-lg font-semibold mb-2">ðŸ§· {{ experience.title }}</h3>
    <p class="text-gray-700 mb-4"><strong>Story:</strong> {{ experience.story }}</p>
    {% if experience.start_date or experience.end_date %}
      <p class="text-gray-600 mb-2 text-sm">
        <strong>Dates:</strong>
        {% if experience.start_date %}{{ experience.start_date }}{% else %}N/A{% endif %}
        â€“
        {% if experience.end_date %}{{ experience.end_date }}{% else %}N/A{% endif %}
      </p>
    {% endif %}

    <h4 class="font-semibold mb-2">Resume Bullet Points:</h4>
    <ul class="list-disc list-inside text-sm text-gray-800 mb-4">
      {% if experience.final_bullets %}
        {% for bullet in experience.final_bullets %}
          <li class="mb-1">{{ bullet.replace('**', '') }}</li>
        {% endfor %}
      {% elif experience.bullet_points %}
        {% if experience.bullet_points is string %}
          {% for line in experience.bullet_points.split('\n') %}
            {% set clean_line = line.replace('**', '') %}
            {% if clean_line.strip() != '' %}
              <li class="mb-1">{{ clean_line }}</li>
            {% endif %}
          {% endfor %}
        {% else %}
          {% for bullet in experience.bullet_points %}
            <li class="mb-1">{{ bullet.replace('**', '') }}</li>
          {% endfor %}
        {% endif %}
      {% else %}
        <li class="text-gray-500 italic">No bullet points available</li>
      {% endif %}
    </ul>

    <h4 class="font-semibold mt-4 mb-2">Skills:</h4>
    <ul class="list-disc list-inside text-sm text-gray-800 mb-4">
      {% if experience.skills %}
        {% if experience.skills is string %}
          {% for skill in experience.skills.split('\n') if skill.strip() != '' %}
            <li class="mb-1">{{ skill.strip().replace('-', '').strip() }}</li>
          {% endfor %}
        {% else %}
          {% for skill in experience.skills %}
            <li class="mb-1">{{ skill }}</li>
          {% endfor %}
        {% endif %}
      {% else %}
        <li class="text-gray-500 italic">No skills identified</li>
      {% endif %}
    </ul>
  </div>

  <div class="flex flex-col sm:flex-row gap-3">
    <a href="{{ url_for('experience') }}" class="w-full sm:w-auto text-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">âž• Add Another Experience</a>
    <a href="/full_resume" class="w-full sm:w-auto text-center bg-gray-200 text-gray-900 px-4 py-2 rounded-md hover:bg-gray-300">ðŸ“„ Generate Full Resume</a>
  </div>
</div>

{% endblock %}